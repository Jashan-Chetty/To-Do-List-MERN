<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>To-Do List</title>
    <style>
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
        margin: 0;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }

      .container {
        background: #fff;
        padding: 32px 40px 40px 40px;
        border-radius: 18px;
        box-shadow: 0 8px 32px rgba(60, 72, 88, 0.12);
        margin-top: 48px;
        min-width: 350px;
        width: 100%;
        max-width: 400px;
      }

      h1 {
        text-align: center;
        color: #6366f1;
        margin-bottom: 24px;
        font-weight: 700;
        letter-spacing: 1px;
      }

      #taskForm {
        display: flex;
        gap: 8px;
        margin-bottom: 24px;
      }

      #taskInput {
        flex: 1;
        padding: 10px 14px;
        border: 1px solid #c7d2fe;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.2s;
      }

      #taskInput:focus {
        border-color: #6366f1;
        outline: none;
      }

      button[type="submit"] {
        background: #6366f1;
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 10px 18px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(99, 102, 241, 0.08);
        transition: background 0.2s, box-shadow 0.2s;
      }

      button[type="submit"]:hover {
        background: #4f46e5;
        box-shadow: 0 4px 16px rgba(99, 102, 241, 0.12);
      }

      #taskList {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      li {
        background: #f1f5f9;
        margin: 10px 0;
        padding: 12px 16px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 8px rgba(60, 72, 88, 0.04);
        transition: background 0.2s, box-shadow 0.2s;
      }

      li:hover {
        background: #e0e7ff;
        box-shadow: 0 4px 16px rgba(99, 102, 241, 0.08);
      }

      .delete-btn {
        background: none;
        border: none;
        color: #ef4444;
        font-size: 1.2rem;
        cursor: pointer;
        border-radius: 50%;
        padding: 4px 8px;
        transition: background 0.2s, color 0.2s;
      }

      .delete-btn:hover {
        background: #fee2e2;
        color: #b91c1c;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>✅ To-Do List</h1>

      <form id="taskForm">
        <input
          type="text"
          id="taskInput"
          placeholder="Enter a new task..."
          required
        />
        <button type="submit">Add</button>
      </form>

      <ul id="taskList"></ul>
    </div>

    <script>
      const API_URL = "http://localhost:3000/tasks";

      const taskForm = document.getElementById("taskForm");
      const taskInput = document.getElementById("taskInput");
      const taskList = document.getElementById("taskList");

      // Load all tasks
      async function loadTasks() {
        const res = await fetch(API_URL);
        const tasks = await res.json();
        taskList.innerHTML = "";
        tasks.forEach((task) => addTaskToDOM(task));
      }

      // Add task
      taskForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const text = taskInput.value.trim();
        if (!text) return;

        const res = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text }),
        });
        const newTask = await res.json();
        addTaskToDOM(newTask);
        taskInput.value = "";
      });

      // Delete task
      async function deleteTask(id, li) {
        await fetch(`${API_URL}/${id}`, {
          method: "DELETE",
        });
        li.remove();
      }

      // Add task element to UI
      function addTaskToDOM(task) {
        const li = document.createElement("li");
        li.textContent = task.task;

        const delBtn = document.createElement("button");
        delBtn.textContent = "❌";
        delBtn.className = "delete-btn";
        delBtn.onclick = () => deleteTask(task._id, li);

        li.appendChild(delBtn);
        taskList.appendChild(li);
      }

      loadTasks();
    </script>
  </body>
</html>
